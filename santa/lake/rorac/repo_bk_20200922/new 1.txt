name: LOAD_Controlm_Operator
description: 'LOAD_Controlm_Operator-Daily'
owner: BI-Corp
active: true
# schedule_interval: '*/30 13-22 * * 1-5'
start_date: '2019-10-27'
# catchup: true
retries: 3
retry_delay: 30
include_dummy_task: true
max_active_runs: 1
input:
  - name: date_from
    description: 'Date From in format YYYY-MM-DD'
  - name: date_to
    description: 'Date To in format YYYY-MM-DD'
  - name: shift
    description: 'Shift in days'
  - name: mode
    description: 'Partition level'
    default: days
tasks:
  - name: ControlM_Executor
    operator: SSHOperator
    config:
      connection_id: de_ssh
      command: "python3 $ZONDA_DIR/repositories/zonda-etl/scripts/api/controlm/controlm_executor.py
      --job_name DESA-PRUEBA-D001"
notifications:
  on_start: false
  on_error: false
  channels: [$DEFAULT_SLACK_CHANNEL]
  
  
  
  /*
  /usr/local/lib/python3.6/site-packages/requests/packages/urllib3/connectionpool.py:838: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/security.html
  InsecureRequestWarning)
Successfully login
/usr/local/lib/python3.6/site-packages/requests/packages/urllib3/connectionpool.py:838: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/security.html
  InsecureRequestWarning)
Job to execute: 54DMS901
Job ID: ctrlm01:1s59i
Last Status: Wait Condition
Job 54DMS901 Not Found
/usr/local/lib/python3.6/site-packages/requests/packages/urllib3/connectionpool.py:838: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/security.html
  InsecureRequestWarning)
Successfully logged out

  */
  
  
  
  
  [srvcengineerbi@lxbidusrv01 ~]$ python3 /aplicaciones/bi/zonda/repositories/zonda-etl/scripts/api/controlm/controlm_status.py --job_name 54DMS901
/usr/local/lib/python3.6/site-packages/requests/packages/urllib3/connectionpool.py:838: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/security.html
  InsecureRequestWarning)
Successfully login
/usr/local/lib/python3.6/site-packages/requests/packages/urllib3/connectionpool.py:838: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/security.html
  InsecureRequestWarning)
Job to execute: 54DMS901
Job ID: ctrlm01:1s59i
{'statuses': [{'jobId': 'ctrlm01:1s59i', 'folderId': 'ctrlm01:', 'numberOfRuns': 1, 'name': '54DMS901', 'folder': '54_MIS_AR', 'type': 'Job', 'status': 'Ended OK', 'held': False, 'deleted': False, 'startTime': '20201201163136', 'endTime': '20201201163201', 'orderDate': '201201', 'ctm': 'ctrlm01', 'description': 'FIN BATCH MALLA DIARIA.', 'host': 'dblxmissrv01', 'application': '54_FIN_DIA', 'subApplication': 'SRV2_FIN_MIS_DIA', 'outputURI': 'https://lxctrlmsrv01.ar.bsch:8443/automation-api/run/job/ctrlm01:1s59i/output', 'logURI': 'https://lxctrlmsrv01.ar.bsch:8443/automation-api/run/job/ctrlm01:1s59i/log'}], 'returned': 1, 'total': 2}
Last Status: Ended OK
Job 54DMS901 Not Found
/usr/local/lib/python3.6/site-packages/requests/packages/urllib3/connectionpool.py:838: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/security.html
  InsecureRequestWarning)
Successfully logged out
